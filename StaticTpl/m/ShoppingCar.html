<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=320, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-touch-fullscreen" content="yes" />
  <meta content="yes" name="apple-mobile-web-app-capable" />
  <meta content="black" name="apple-mobile-web-app-status-bar-style" />
  <meta content="telephone=no" name="format-detection" />
  <meta name="keywords" content="HeyJuice,轻断食果汁,纤体,冷榨蔬果汁,轻断食蔬果汁,HeyJuice轻断食蔬果汁,果汁,果蔬汁,轻断食果蔬汁,冷榨果汁" />
  <meta name="description" content="轻断食果蔬汁HeyJuice，3天变美计划。营养学家设计的冷压鲜榨果蔬汁餐单，每天6瓶连续3天，排出体内毒素，激发细胞修复力，减去多余脂肪、美颜、身体变轻盈，充满青春活力！新鲜水果与蔬菜冷压鲜榨，全程冷链免费送达。" />
  <title>轻断食果蔬汁HeyJuice，3天变美计划</title>
  <script type="text/javascript" src="/Public/Common/js/base.js?v=1.3"></script>
  <script type="text/javascript" src="/Public/Common/js/common.js?v=1.3"></script>
  <script type="text/javascript" src="/Public/Wap/js/global.js?v=1.3"></script>
  <link rel="stylesheet" type="text/css" href="/Public/Common/css/base.css?v=1.3">
  <link rel="stylesheet" type="text/css" href="/Public/Wap/css/global.css?v=1.3">
</head>
<body>
<div class="wrap Wrap">
<div class="header clearfix">
  <div class="navbox">
    <div class="navbar NavBar">
      菜单
    </div>
  </div>
  <ul class="nav NavList">
    <li><a href="/Index">首页</a></li>
    <li><a href="/Product">产品</a></li>
    <li><a href="/Comments/index?type=index">顾客口碑</a></li>
    <!-- 				<li><a href="/Brand">品牌活动</a></li> -->
    <li><a href="/Service">品牌理念</a></li>
    <li><a href="/Delivery">配送范围查询</a></li>
    <li><a href="/Qa">帮助中心</a></li>
    <li><a href="/Customer">个人中心</a></li>
    <li><a href="/Customer/logout">退出登录</a></li>
  </ul>HeyJuice<div class="shoping_car">
  <a class="ShoppingCarLink" href="/ShoppingCar">
    <sapn class="shopping_num_1 ShoppingCarNum">1
    </sapn>
  </a>
</div>
</div>
<div class="main">

  <div class="shoppingcar_main">
    <div class="progress_1">
      <ul>
        <li class="s1 this"><span>1购物车</span><img src="/Public/Wap/images/dian_icon.png" width="32px"></li>
        <li class="s2"><span>2填写收货信息</span><img src="/Public/Wap/images/dian_icon.png" width="32px"></li>
        <li class="s3"><span>3订单提交成功</span></li>
      </ul>
    </div>
    <div class="cart_null">
      <p>当前购物车为空</p>
      <img src="/Public/Wap/images/cart_icon.png" width="108px">
      <a href="/Product/index">去选果蔬汁</a>
    </div>

    <div class="shoppingcar_list">
      <table class="ProductRow">
        <tbody><tr>
          <td colspan="2">
            <label>
              <table class="shoppingcarinfo">
                <tbody><tr>
                  <td><input name="product_id" value="1" type="checkbox" class="SelectBox SelectProductValue"></td>
                  <td><img src="/Public/Common/images/product/product_01.png" width="100"></td>
                  <td>
                    <p class="sp_1 f13">
                      轻断食果蔬汁
                      经典款
                      (三天装)
                    </p>
                    <p class="sp_2">包含18瓶400ml代餐清体果蔬汁以及保温包3个，保鲜冰袋3个</p>
                    <p class="sp_3">单价：¥490.00</p>
                  </td>
                </tr>
                </tbody></table>
            </label>
          </td>
        </tr>
        <tr>
          <td style="text-align: right; width: 142px;">
            <a href="javascript:;" data-product-id="1" class="car_num this ProductJian">-</a>
            <div class="itext ProductQty">1</div>
            <a href="javascript:;" data-product-id="1" class="car_num  ProductJia">+</a>
          </td>
          <td style="text-align: right; padding:10px;">
            <a class="shopping_del ProductDelSubmit" data-product-id="1" href="javascript:;">删除</a>
          </td>
        </tr>
        <tr>
          <td colspan="2" class="shopping_god">总计：¥ <span class="ProductMoney">490</span></td>
        </tr>
        </tbody></table>
    </div>

    <div class="cart_del">
      <label><input type="checkbox" class="SelectAll">全选</label>
    </div>

    <div class="cart_box clearfix">
      <div class="cart_gods">总计金额：<span class="ProductAllMoney"> ¥ 490</span></div>
      <a href="javascript:;" class="cart_go_pay ProductSubmit">去结算</a>
    </div>
  </div>
  <script type="text/javascript">
    var ShoppingCar = (function(){
      var fn_qty_money = function(obj, num){
        var product_id = obj.attr('data-product-id');
        var data = {'product_id':product_id,'qty':num};
        var qty_box = obj.siblings('.ProductQty');
        var qty_money = obj.parents('.ProductRow').find('.ProductMoney');
        Base.Http.ajax({
          url : '/ShoppingCar/update',
          data : data,
          success : function(data){
            if (data['status']==1) {
              if (data['data']) {
                var qty = data['data']['qty'];
                var price = data['data']['price'];
                if (qty==1||qty==10) {
                  obj.addClass('this');
                }else{
                  obj.siblings('a').removeClass('this');
                }
                qty_box.html(qty);
                qty_money.html(qty*price);
              }else{
                window.location.reload();
              }
              fn_all_money();
            }else{
              Common.Prompt.alert({
                tips : data['info'],
                enter_text : '确认'
              });
            }
          }
        });
      };
      var fn_all_money = function(){
        var box = $('.SelectBox:checked').parents('.ProductRow').find('.ProductMoney');
        var money = 0;
        for( var i = 0 ; i < box.length ; i ++ ){
          money += Number(box.eq(i).html());
        };
        $('.ProductAllMoney').html(' ¥ '+Math.round(money*100)/100);
      };
      var fn_box_status = function(status){
        var box = $('.SelectBox');
        for( var i = 0 ; i < box.length ; i ++ ){
          var row = box.eq(i);
          if (status&&!row[0].checked) {
            row.click();
          };
          if (!status&&row[0].checked) {
            row.click();
          };
        }
      };
      var fn_product_submit = function(){
        var data = Base.Form.serialize($('.SelectProductValue'));
        if (data['product_id']) {
          Base.Http.ajax({
            url : '/ShoppingCar/jump',
            data : data,
            success : function(data){
              if (data['status']==1) {
                window.location.href = data['data'];
              }else{
                Common.Prompt.alert({
                  tips : data['info'],
                  enter_text : '确认'
                });
              }
            }
          });
        }else{
          Common.Prompt.alert({
            tips : '请选择要结算的商品！',
            enter_text : '确认'
          });

        }
      };
      return {
        jia : function(){
          fn_qty_money($(this),'1');
        },
        jian : function(){
          fn_qty_money($(this),'-1');
        },
        del : function(){
          $(this).siblings('.ProductDelConfirm').show();
        },
        del_exit : function(){
          $(this).parent('.ProductDelConfirm').hide();
        },
        del_submit : function(){
          fn_qty_money($(this),'0');
        },
        all : function(){
          var all = $(this);
          var status = all.eq(0)[0].checked;
          fn_box_status(status);
          fn_all_money();
        },
        row : function(){
          var row = $('.SelectBox');
          var row_checked = $('.SelectBox:checked');
          if (row.length==row_checked.length) {
            $('.SelectAll').eq(0)[0].checked = true;
          };
          if (row.length>row_checked.length) {
            $('.SelectAll').eq(0)[0].checked = false;
          };
          fn_all_money();
        },
        submit : fn_product_submit
      }
    }());
    $(function(){
      //确认
      // Common.Prompt.confirm({
      // 	tips : '这里输入提示文本',
      // 	enter_text : '确认按钮',
      // 	exit_text : '退出按钮',
      // 	callback : {
      // 		enter : function(){
      // 			alert('enter')
      // 		},
      // 		exit : function(){
      // 			alert('exit')
      // 		},
      // 		close : function(){
      // 			alert('close')
      // 		}
      // 	}
      // });
      // 提醒
      // Common.Prompt.alert({
      // 	tips : '1111',
      // 	enter_text : '111112222',
      // 	callback : {
      // 		enter : function(){
      // 			alert('enter')
      // 		},
      // 		close : function(){
      // 			alert('close')
      // 		}
      // 	}
      // });
      // 自动
      // Common.Prompt.auto({
      // 	tips : 'auto',
      // 	temp : 3
      // });
      $('.ProductJia').click(ShoppingCar.jia);
      $('.ProductJian').click(ShoppingCar.jian);
      $('.SelectAll').click(ShoppingCar.all);
      $('.SelectBox').click(ShoppingCar.row).click();
      $('.ProductSubmit').click(ShoppingCar.submit);
      $('.ProductDel').click(ShoppingCar.del);
      $('.ProductDelExit').click(ShoppingCar.del_exit);
      $('.ProductDelSubmit').click(ShoppingCar.del_submit);
    });
  </script>
</div>
<div class="footer">
  <p>为更好的自己<br>Better Me</p>
  <span>京ICP备14009743号  ©HeyJuice 2014</span>
</div>
</div>
<!-- 弹出层 -->
<div class="mask_pro MarkWrap"></div>
<div style="display:none;">
  <script type="text/javascript">
    var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://":" http://");
    document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fe1e9293140df80038214b7e8ebdc4ab7' type='text/javascript'%3E%3C/script%3E"));
  </script>
</body>
</html>
