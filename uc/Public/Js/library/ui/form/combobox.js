BQ.add("ui.form.ComboBox",function(k){var l={defText:"\u67e5\u8be2\u65e0\u6570\u636e",dataTwo:null,publicUse:"ul li",callback:function(){},color:"#D7D7D7",before:null,after:null,Templete:{Header:'<ul><li class="lis"><input id="%input%" value="text" class="iput"/><img id="%img%" class="img" src="/js/public/ui/static/combobox_jt.jpg"/></li></ul>',Footer:'<div class="ceng" id="%layer%" style="display:none; height:110px; overflow:auto; z-index:1024;"><ul>%item%</ul></div>',Item:'<li id="%id%">%name%</li>'},
ID:null},i=function(c,b){var a=this;if(!(a instanceof i))return new i(c,k.merge(l,b));a.config=b;a.container=c;var d=!b.ID,e=c.match(/\w+/g),h=e?e.join(""):"",e=d?"input_"+h:b.ID[0].replace(/^#/,""),j=d?"img_"+h:b.ID[1].replace(/^#/,""),h=d?"layer_"+h:b.ID[2].replace(/^#/,"");d&&(header=b.Templete.Header.replace("%input%",e).replace("%img%",j),$(c).append(header));a.panles="#"+h;a.footer=b.Templete.Footer;a.item=b.Templete.Item;a.input=e;var g=$(c),j=$("#"+j,g),f=$("#"+e,g);a._panles=$(a.panles,g);
j.add(f).click(function(){b.before&&b.before.call(a);a._panles.show();g.css("z-index","9999");b.after&&b.after.call(a)});$(document.body).click(function(b){$(b.target).parents(c).length||(a._panles.hide(),g.css("z-index","1"))});a.upLast=function(c){f.filter("[type=text]").length==0?f.text(c):f.val(c);$(b.publicUse,a._panles).unbind("mouseenter").mouseenter(function(){$(this).css("background-color",b.color).siblings().removeAttr("style")});$(b.publicUse,a._panles).unbind("click").click(function(){f.filter("[type=text]").length==
0?f.text($(this).text()):f.val($(this).text());a._panles.hide();g.css("z-index","1");b.callback.call(a,$(this).attr("id"),$(this).text())})};b.dataTwo&&a.updateItem(b.dataTwo);!d&&a.upLast(b.defText)};k.augment(i,{updateItem:function(c){var b=[],a=this,d=$(a.container),e="";if(!a.config.ID){$(a.panles).get(0)&&$(a.panles).remove();$("#"+a.input,d).val(a.config.defText);if(!c)return!1;if(c.result[0].length==0)return!1;$.each(c.result[0],function(c,d){e||(e=d.name);b.push(a.item.replace("%id%",d.id).replace("%name%",
d.name))});c=a.footer.replace("%layer%",a.panles.replace("#","")).replace("%item%",b.join(""));d.append(c);a._panles=$(a.panles);a.upLast(e)}},get:function(){var c=$("#"+this.panles);return c.filter("[type=text]").length==0?c.text():c.val()},set:function(c){var b=$("#"+this.input);b.filter("[type=text]").length==0?b.text(c):b.val(c)},hide:function(){this._panles.hide()}});return i});
