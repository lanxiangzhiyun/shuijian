BQ.add("ui.form.FlashLoader",function(o){function i(b,a){function e(){f.loader=document.getElementById(j);g=f.loader.getBytesLoaded();h=f.loader.getBytesTotal();var c=f.getPcnt(),c={bytesLoaded:g,bytesTotal:h,pcnt:c};k&&k(c);f.isLoaded()&&(window.clearInterval(m),l&&l())}var g,h,d=!1,l=a&&a.complate,n=a&&a.start,k=a&&a.progress,m;this.loader=null;this.loaderIndex=0;this.swfURL=b;var i=o.Config.base+"form/swf/upload.swf?"+Math.random(),f=this,j;this.loadURL=function(c){this.swfURL=encodeURIComponent(c)};
this.addTo=function(c,a){j=c;n&&n();var b=a.width,d=a.height;BQ.form.SwfObject.embedSWF(i,c,b||"100%",d||"100%","10.0.0",null,{url:this.swfURL,loaderIndex:this.loaderIndex,callBack:"BQ.form.FlashLoader.ready"},{wmode:"transparent",allowScriptAccess:"sameDomain"});this.loader=BQ.form.SwfObject.getObjectById(c)};this.getBytesTotal=function(){return h=this.loader.getBtyesTotal()};this.getBytesLoaded=function(){return g=this.loader.getBytesLoaded()};this.getPcnt=function(){return g&&h&&g/h*100};this.isLoaded=
function(){this.loader=document.getElementById(j);return d=this.loader.getLoadState()};this.start=function(){if(k||l)m=window.setInterval(e,2)}}var d=[];return{loader:function(b,a){var e=new i(b,a);d.push(e);e.loaderIndex=d.length-1;return e},getLoader:function(b){return d[b]},ready:function(b){d[b].start()}}});
