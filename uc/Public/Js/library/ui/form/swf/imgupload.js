BQ.add("ui.form.ImgUpload",function(l){function f(a,b,c){var d=b&&b.browButtonSkin,f=b&&b.uploadButtonSkin,m=b&&b.postParams,n=b&&b.multiple,o=b&&b.async,g=c&&c.imgStartLoad,h=c&&c.imgReady,i=c&&c.complate,j=c&&c.progress;this.loader=null;this.loaderIndex=0;this.serverURL=a;var p=l.Config.base+"ui/form/swf/imageupload/upload.swf?"+Math.random(),k,e,q={brow:d,upload:f};this.addTo=function(a,b){e=a;var c=document.getElementById(a);k=c.getAttribute("class")||c.className;c.getAttribute("style");BQ.ui.form.SwfObject.embedSWF(p,
a,b&&b.width||"100%",b&&b.height||"100%","10.0.0",null,{url:this.serverURL,loaderIndex:this.loaderIndex,callBack:"BQ.ui.form.imgLoader.btnReady"},{wmode:"transparent",allowScriptAccess:"always"});this.loader=BQ.ui.form.SwfObject.getObjectById(a)};this.upload=function(){this.loader=document.getElementById(e);this.loader.uploade()};this.remove=function(a){this.loader=document.getElementById(e);this.loader.remove(a)};this.startLoadHandel=function(){g&&g()};this.imgReadyHandel=function(a){h&&h(a)};this.uploadedHandel=
function(a){i&&i(a)};this.progressHandel=function(a){j&&j(a)};this.sentPar=function(){this.loader=document.getElementById(e);this.loader.className=k;this.loader.setpar({skin:q,postParams:m,multiple:n,async:o})}}var d=[];return{loader:function(a,b,c){a=new f(a,b,c);d.push(a);a.loaderIndex=d.length-1;return a},getLoader:function(a){return d[a]},startLoad:function(a){d[a].startLoadHandel()},imgReady:function(a,b){d[a].imgReadyHandel(b)},uploaded:function(a,b){d[a].uploadedHandel(b)},btnReady:function(a){d[a].sentPar()},
progress:function(a,b){d[a].progressHandel(b)}}});
