BQ.add("ui.form.Tree",function(r){function p(j,b){function y(a){a=a||window.event||a;a=a.target||a.srcElement;a=a.innerText||a.textContent;if(!b.FolderIsLink||!a){var k=this.childNodes,a=this.nextSibling,h=k.length,d=k[h-5],c=k[h-4],i=k[h-3],k=k[h-2];this.getAttribute("state")=="show"?(e.css(d,"display: none;"),e.css(c,"display: none;"),e.css(i,"display: block;"),e.css(k,"display: block;"),this.setAttribute("state","hide"),e.css(a,"display: none;")):(e.css(d,"display: block;"),e.css(c,"display: block;"),
e.css(i,"display: none;"),e.css(k,"display: none;"),this.setAttribute("state","show"),e.css(a,"display: block;"))}}function o(a){if(!b.isUseCheckBox)return!1;var k=a.lastChild,h=!0,d=!1;if(a.firstChild.checked==!0){for(d=0;d<l.length;d++)l[d]==k.innerHTML&&(h=!1),e.num++;h==!0&&l.push(k.innerHTML)}else if(h=l.length,l.length==1)l.length=0;else{for(a=0;a<h-1;a++)l[a]==k.innerHTML&&(d=!0),d==!0&&(l[a]=l[a+1]),e.num++;if(l.length)l.length=h-1}b.callback&&b.callback.call(e,l)}function s(a){for(var k=
j,h=0;h<a.length;h++)if(j=k,a[h].type=="file"){var d=a[h],c=b.ImgUrl,i=document.createElement("div"),f=document.createElement("div");b.isUseClass?i.className=m[9]:e.css(i,"clear: both;");b.isUseClass?f.className=m[10]:e.css(f,"width: 200px;height: 20px;margin-left: 2px;");q==!0&&(t=f);f.setAttribute("state","show");if(b.customevent)f.onclick=y;i.appendChild(f);for(var g=0;g<d.level;g++){var l=document.createElement("div");b.isUseClass?l.className=m[11]:e.css(l,"width: 20px;height: 20px;float: left;");
f.appendChild(l)}if(b.isUseCheckBox){g=document.createElement("input");g.type="checkbox";g.name="tree";e.css(g,"float: left;margin: 0px;padding: 0px;");if(typeof d.attr!="undefined")for(l in l=void 0,d.attr)g.setAttribute(l,d.attr[l]);if(b.customevent)g.onclick=z;f.appendChild(g)}g=document.createElement("div");c[0].length>0?b.isUseClass?g.className=m[0]:e.css(g,"width:20px;height: 20px;float: left;background: url("+c[0]+") no-repeat center center;"):b.isUseClass?g.className=m[0]:e.css(g,"width: 0px;height: 20px;float: left;background: url("+
c[0]+") no-repeat center center;");f.appendChild(g);g=document.createElement("div");c[1].length>0?b.isUseClass?g.className=m[1]:e.css(g,"width :18px;height: "+n.cssProperty+"; float: left;background: url("+c[1]+") no-repeat center center;"):b.isUseClass?g.className=m[1]:e.css(g,"width: 0px;height:"+n.cssProperty+"; float: left;background: url("+c[1]+") no-repeat center center;");f.appendChild(g);g=document.createElement("div");c[2].length>0?b.isUseClass?g.className=m[2]:e.css(g,"width: 20px;height: 20px;display: none;float: left;background: url("+
c[2]+") no-repeat center center;"):b.isUseClass?g.className=m[2]:e.css(g,"width: 0px;height: 20px;display: none;float: left;background: url("+c[2]+") no-repeat center center;");f.appendChild(g);g.style.display="none";g=document.createElement("div");c[3].length>0?b.isUseClass?g.className=m[3]:e.css(g,"width: 18px;height: "+n.cssProperty+";display: none;float: left;background: url("+c[3]+") no-repeat center center;"):b.isUseClass?g.className=m[3]:e.css(g,"width: 0px;height:"+n.cssProperty+";display: none;float: left;background: url("+
c[3]+") no-repeat center center;");f.appendChild(g);g.style.display="none";c=document.createElement("div");b.isUseClass?c.className=m[4]:e.css(c,"height: "+n.cssProperty+";lineHeight:"+n.cssProperty+";cursor: pointer; float: left;font-size: 12px;");c.innerHTML=d.name;f.appendChild(c);d=document.createElement("div");if(b.isUseClass)d.className=m[5];j.appendChild(i);q==!0&&(u=d);q=!1;j=d;i.appendChild(d);i.setAttribute("Etype","file");data=a[h].children;s(data)}else if(a[h].type=="document"){i=a[h];
d=document.createElement("div");for(f=0;f<i.level;f++)c=document.createElement("div"),b.isUseClass?c.className=m[12]:e.css(c,"width: 20px;height: 20px;float: left;"),d.appendChild(c);f=document.createElement("div");b.isUseClass?f.className=m[13]:e.css(f,"width: 20px;height: 20px;float: left;");d.appendChild(f);f=document.createElement("label");d.appendChild(f);if(b.isUseClass)f.className=m[6];if(b.isUseCheckBox){c=document.createElement("input");c.type="checkbox";c.name="tree";e.css(c,"float: left;margin: 0px;padding: 0px;");
if(typeof i.attr!="undefined")for(g in g=void 0,i.attr)c.setAttribute(g,i.attr[g]);if(b.customevent)c.onclick=v;f.appendChild(c)}c=document.createElement("div");b.ImgUrl[4].length>0?b.isUseClass?c.className=m[7]:e.css(c,"width: 20px;height: 20px;float: left;margin: 0px;padding: 0px;background: url("+b.ImgUrl[4]+") no-repeat center center;"):b.isUseClass?c.className=m[7]:e.css(c,"width: 0px; height: 20px;float: left;margin: 0px;padding: 0px;background: url("+b.ImgUrl[4]+") no-repeat center center;");
f.appendChild(c);c=document.createElement("div");c.innerHTML=i.name;b.isUseClass?c.className=m[8]:e.css(c,"height: 20px; cursor: pointer; float: left; font-size: 12px; lineHeight: 20px;");f.appendChild(c);if(b.customevent)f.onclick=A;b.isUseClass?d.className=m[14]:e.css(d,"margin-left: -18px; clear: both;");b.isUseClass?j.className=m[5]:e.css(j,"margin-left: 0px;");j.appendChild(d)}}function z(a){e.stopPropagation(a);var a=a||window.event||a,b=a.target||a.srcElement,h=this.parentNode.parentNode.lastChild.childNodes;
if(this.checked)for(var d=0;d<h.length;d++)for(var c=h[d].getElementsByTagName("input"),i=0;i<c.length;i++){c[i].checked="checked";var f=c[i].parentNode;e.num>2E3?setTimeout(function(){f.tagName.toLowerCase()=="label"&&o(f,b);e.num=0},30):f.tagName.toLowerCase()=="label"&&o(f,b)}else for(d=0;d<h.length;d++){c=h[d].getElementsByTagName("input");for(i=0;i<c.length;i++)c[i].checked="",f=c[i].parentNode,e.num>2E3?setTimeout(function(){f.tagName.toLowerCase()=="label"&&o(f,b);e.num=0},30):f.tagName.toLowerCase()==
"label"&&o(f,b)}v(a)}function w(a,k,h){var d=h.target||h.srcElement;if(a&&k){for(var c=!1,i=k.getElementsByTagName("input"),f=k.childNodes,k=0;k<i.length;k++)if(i[k].checked==!1){c=!0;break}if(b.CheckBoxRules)c==!0?a.getElementsByTagName("input")[0].checked="":a.getElementsByTagName("input")[0].checked="checked";else if(e.contains(a.getElementsByTagName("input")[0].parentNode.nextSibling,d))a.getElementsByTagName("input")[0].checked="checked";for(d=0;d<f.length;d++)if(f[d].getAttribute("Etype")==
"file")a=f[d].firstChild,k=f[d].lastChild,w(a,k,h)}}function v(a){a=a||window.event;w(t,u,a)}function A(a){var b=this,a=a||window.event||a,h=a.target||a.srcElement;e.stopPropagation(a);clearTimeout(x);x=setTimeout(function(){o(b,h)},50)}var e=this;if(!(e instanceof p))return new p(j,r.merge(B,b));var n={cssProperty:b.cssProperty&&b.cssProperty.folderHeight?b.cssProperty.folderHeight:"18px"},m=["arrowOpen","folderOpen","arrowFold","folderFold","folderText","folderContainer","inText","inText_div","inText_txt",
"folderWrap","folderHd","folderLine","labelFirst","labelSecond","LabelParent"],j=document.getElementById(j),l=[],x=null,t=null,u=null,q=!0;e.callobj=l;s(b.data)}var B={isUseCheckBox:!0,FolderIsLink:!1,isUseImg:!0,isUseClass:!1,data:[],customevent:!0,CheckBoxRules:1,ImgUrl:["images/minusbottom.gif","images/folderopen.gif","images/plus.gif","images/folder.gif","images/ie.gif"],callback:null,cssProperty:{folderHeight:"18px"}};r.augment(p,{preventDefault:function(j){document.all?window.event.returnValue=
!1:j.preventDefault()},stopPropagation:function(j){document.all?window.event.cancelBubble=!0:j.stopPropagation()},css:function(j,b){if(!j)return!1;j.style.cssText=b},sendData:function(j){j(this.callobj)},contains:function(j,b){return j.contains?j!=b&&j.contains(b):!!(j.compareDocumentPosition(b)&16)},timer:null,num:0});return p});
