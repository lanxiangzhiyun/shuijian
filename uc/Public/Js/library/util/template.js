BQ.add("util.Template",function(e){var d={};return{display:function(a,b,f){var c=[];if(!a)return"";var g=d[a]||(d[a]=function(a){a=a.replace(/([\'|\\])/gm,"\\$1").replace(/\\?\%([^%]+)\%/g,"'+s(data, \"$1\")+'").replace(/[\n\r]/gm,"");return new Function("data","return '"+a+"';function s(a,b){var c=0,d=b.split('.');for(b=d.length;c<b;++c){a=a[d[c]];if(a===undefined)return''}return a}")}(a));b.length?e.each(b,function(a,b){c[b]=g(a)}):c[0]=f||"";return c.join("")},escape:function(a){var b={"&":"amp",
"<":"lt",">":"gt",'"':"quot","'":"#39","{":"#123","}":"#125","@":"#64","%":"#37"};return a.replace(/[<>'"\{\}&%@]/g,function(a){return"&"+b[a]+";"})},unescape:function(a){var b={amp:"&",lt:"<",gt:">",quot:'"',"#39":"'","#64":"@","#123":"{","#125":"}","#37":"%"};return decodeURIComponent(a).replace(/&([^;]+);/g,function(a,c){return b[c]||function(){if(c.charAt(0)=="#"){var b=Number("0"+c.substr(1));if(!isNaN(b))return String.fromCharCode(b)}return a}()})}}});
