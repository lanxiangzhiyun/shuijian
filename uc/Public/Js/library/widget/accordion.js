BQ.add("widget.Accordion",function(G){function y(o,a){var k=this;if(!(k instanceof y))return new y(o,G.merge(H,a));var o=$(o),b=o.find(a.panels),f=o.find(a.content),g=b.length-1,d=g-1,r=[],p=[],l=0,n,h=0,m=0,e=!0,q=null,s=null,z=null;a.index=g;if(a.type==0){b.each(function(a){$(this).attr("order",a)});a.vertical==!1?(f=parseInt(b.eq(0).css("right")),n=parseInt(b.eq(1).css("right")),l=b.width(),h=f-n,m=l-h):a.vertical==!0&&(f=parseInt(b.eq(0).css("bottom")),n=parseInt(b.eq(1).css("bottom")),l=b.height(),
h=f-n,m=l-h);f=function(){if(d<0&&e==!0)e=!1,d=g-1,a.index=g,b.slice(0,g).animate({right:"+="+m},a.speed,function(){e=!0}),a.callback&&a.callback.call(k,a.index);else if(e==!0)falg=!1,b.eq(d).animate({right:"-="+m},a.speed,function(){e=!0}),a.index=d,d--,a.callback&&a.callback.call(k,a.index)};n=function(){if(d<0&&e==!0)e=!1,d=g-1,a.index=g,b.slice(0,g).animate({bottom:"+="+m},a.speed,function(){e=!0}),a.callback&&a.callback.call(k,a.index);else if(e==!0)falg=!1,b.eq(d).animate({bottom:"-="+m},a.speed,
function(){e=!0}),a.index=d,d--,a.callback&&a.callback.call(k,a.index)};var A=function(c){b.stop(!0,!0);if(e==!0)c=parseInt(c.attr("order")),c<a.index?(e=!1,b.slice(c,a.index).animate({right:"-="+m},a.speed,function(){e=!0})):c>a.index&&(e=!1,b.slice(a.index,c).animate({right:"+="+m},a.speed,function(){e=!0})),a.index=c,d=c-1,a.callback&&a.callback.call(k,a.index)},B=function(c){b.stop(!0,!0);if(e==!0)c=parseInt(c.attr("order")),c<a.index?(e=!1,b.slice(c,a.index).animate({bottom:"-="+m},a.speed,function(){e=
!0})):c>a.index&&(e=!1,b.slice(a.index,c).animate({bottom:"+="+m},a.speed,function(){e=!0})),a.index=c,d=c-1,a.callback&&a.callback.call(k,a.index)};if(a.vertical==!1)var C=f,D=A;else a.vertical==!0&&(C=n,D=B);z=setInterval(C,a.interval);b.mouseenter(function(){clearInterval(z);var a=$(this);clearTimeout(q);q=setTimeout(function(){D(a)},100)});b.mouseleave(function(){z=setInterval(C,a.interval)})}else if(a.type==1){var t=b.innerWidth(),u=b.height(),v=f.innerWidth(),w=f.height();o.css({position:"relative"});
a.vertical==!1?(h=b.eq(0).innerWidth(),l=f.outerWidth()):a.vertical==!0&&(h=b.eq(0).height(),l=f.outerHeight());b.each(function(a){$(this).attr("order",a);a=$(this).find("img").attr("src");r.push(a)});f.each(function(a){$(this).attr("order",a);a=$(this).find("img").attr("src");p.push(a)});var i=b.parent().clone();o.append(i);a.vertical==!1?i.css({position:"absolute",left:l-h}):a.vertical==!0&&i.css({position:"absolute",top:l-h});i=i.children();i.hide();f=function(){d<0?(d=g-1,a.index=g,b.slice(0,
g).animate({width:h},a.speed,function(){b.each(function(a){$(this).find("img").attr("src",r[a]).css({width:t,height:u})})}),i.hide()):(a.index=d,b.eq(d).find("img").attr("src",p[a.index]),b.eq(d).find("img").css({width:v,height:w,overflow:"hidden"}),b.eq(d).animate({width:l},a.speed,function(){i.eq(a.index+1).show()}),d--);a.callback&&a.callback.call(k,a.index)};n=function(){d<0?(d=g-1,a.index=g,b.slice(0,g).animate({height:h},a.speed,function(){b.each(function(a){$(this).find("img").attr("src",r[a]).css({width:t,
height:u})})}),i.hide()):(a.index=d,b.eq(d).find("img").css({width:v,height:w,overflow:"hidden"}),b.eq(d).find("img").attr("src",p[a.index]),b.eq(d).animate({height:l},a.speed,function(){i.eq(a.index+1).show()}),d--);a.callback&&a.callback.call(k,a.index)};var A=function(c){if(e==!0){var j=parseInt(c.attr("order")),f=b.slice(j,a.index),h=i.slice(j+1,g+1);if(j!=a.index)e=!1,a.index=j,d=j-1,c.find("img").attr("src",p[j]),f.each(function(a){$(this).find("img").attr("src",p[j+a]).css({width:v,height:w,
overflow:"hidden"})}),f.animate({width:l},a.speed,function(){h.show();e=!0}),a.callback&&a.callback.call(k,a.index)}},B=function(c){if(e==!0){var j=parseInt(c.attr("order")),f=b.slice(j,a.index),h=i.slice(j+1,g+1);if(j!=a.index)e=!1,a.index=j,d=j-1,c.find("img").attr("src",p[j]),f.each(function(a){$(this).find("img").attr("src",p[j+a]).css({width:v,height:w,overflow:"hidden"})}),f.animate({height:l},a.speed,function(){h.show();e=!0}),a.callback&&a.callback.call(k,a.index)}},I=function(c){if(e==!0){var c=
parseInt(c.attr("order")),d=b.slice(a.index,c),f=i.slice(a.index,c+1);if(c!=a.index)e=!1,f.hide(),d.animate({width:h},a.speed,function(){d.each(function(){var a=parseInt($(this).attr("order"));$(this).find("img").attr("src",r[a]).css({width:t,height:u,overflow:"hidden"})});e=!0}),a.index=c,a.callback&&a.callback.call(k,a.index)}},J=function(c){if(e==!0){var c=parseInt(c.attr("order")),d=b.slice(a.index,c),f=i.slice(a.index,c+1);if(c!=a.index)e=!1,f.hide(),d.animate({height:h},a.speed,function(){d.each(function(){var a=
parseInt($(this).attr("order"));$(this).find("img").attr("src",r[a]).css({width:t,height:u,overflow:"hidden"})});e=!0}),a.index=c,a.callback&&a.callback.call(k,a.index)}};if(a.vertical==!1)var x=f,E=A,F=I;else a.vertical==!0&&(x=n,E=B,F=J);s=setInterval(x,a.interval);b.mouseenter(function(){clearInterval(s);var a=$(this);clearTimeout(q);q=setTimeout(function(){E(a)},100)});b.mouseleave(function(){s=setInterval(x,a.interval)});i.mouseenter(function(){clearInterval(s);var a=$(this);clearTimeout(q);
q=setTimeout(function(){F(a)},100)});i.mouseleave(function(){s=setInterval(x,a.interval)})}}var H={panels:"li",content:"ul.right li",speed:500,interval:3E3,vertical:!1,type:0,index:0,callback:null};return y});
