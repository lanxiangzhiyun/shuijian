BQ.add("widget.AnyZoom",function(o){function p(e,g){function k(b){y?b.style.filter="alpha(opacity="+a.config.filter[0]+")":b.style.opacity=a.config.filter[1]}function l(a,d){o.each(d,function(c,d){a[d]=c})}function v(a){for(var d=a,c=a.offsetTop,e=a.offsetLeft,h=0,i=0,f={};a=a.offsetParent;)c+=a.offsetTop,e+=a.offsetLeft;for(;d=d.parentNode;)~~d.scrollTop&&(h+=d.scrollTop),~~d.scrollLeft&&(i+=d.scrollLeft);f.STop=c;f.SLeft=e;return f}function z(a,d){var a=i(a),c;if(a){switch(d){case 7:c=q;break;case 6:c=
r;break;case 5:c=s;break;case 4:c=t;break;case 3:c=A;break;case 2:c=B;break;case 1:c=C;break;case 0:c=w;break;default:c=w}f.addEvent(a,"mousedown",f.Bind(this,D,c))}}function D(b,d){a._obj.funName=d;a._obj.styleWidth=a._obj.clientWidth;a._obj.styleHeight=a._obj.clientHeight;a._obj.styleLeft=a._obj.offsetLeft;a._obj.styleTop=a._obj.offsetTop;a._obj.side_Left=b.clientX-a._obj.styleWidth;a._obj.side_Right=b.clientX+a._obj.styleWidth;a._obj.side_Up=b.clientY-a._obj.styleHeight;a._obj.side_Down=b.clientY+
a._obj.styleHeight;a._obj.fix_Left=a._obj.styleWidth+a._obj.styleLeft;a._obj.fix_Top=a._obj.styleHeight+a._obj.styleTop;a.config.frame!=null&&(f.addEvent(a.config.frame.contentWindow.document,"mousemove",m),f.addEvent(a.config.frame.contentWindow.document,"mouseup",n));f.addEvent(document,"mousemove",m);f.addEvent(document,"mouseup",n)}function n(){h.width=a._obj.styleWidth;h.style.left=a._obj.styleLeft+"px";h.height=a._obj.styleHeight;h.style.top=a._obj.styleTop+"px";i(a.config.dragDiv).style.top=
h.offsetTop+"px";i(a.config.dragDiv).style.left=h.offsetLeft+"px";i(a.config.dragDiv).style.width=h.width+"px";i(a.config.dragDiv).style.height=h.height+"px";f.removeEvent(document,"mousemove",m);f.removeEvent(document,"mouseup",n);a.config.frame!=null&&(f.removeEvent(a.config.frame.contentWindow.document,"mousemove",m),f.removeEvent(a.config.frame.contentWindow.document,"mouseup",n))}function m(b){a._obj.funName(b);a._obj.style.top=a._obj.styleTop+"px";a._obj.style.left=a._obj.styleLeft+"px";a._obj.style.width=
a._obj.styleWidth+"px";a._obj.style.height=a._obj.styleHeight+"px"}function w(a){t(a);q(a)}function C(a){s(a);q(a)}function B(a){t(a);r(a)}function A(a){s(a);r(a)}function t(b){a._obj.styleWidth=Math.max(b.clientX-a._obj.side_Left,0)}function s(b){a._obj.styleWidth=Math.max(a._obj.side_Right-b.clientX,0);a._obj.styleLeft=a._obj.fix_Left-a._obj.styleWidth}function r(b){a._obj.styleHeight=Math.max(a._obj.side_Down-b.clientY,0);a._obj.styleTop=a._obj.fix_Top-a._obj.styleHeight}function q(b){a._obj.styleHeight=
Math.max(b.clientY-a._obj.side_Up,0)}function E(b){var b=b||window.event,d=b.target||b.srcElement;if(!d.getAttribute(u)&&(d.setAttribute("width",d.width),d.setAttribute("height",d.height),!i(a.config.dragDiv))){d.setAttribute(u,!0);var b=a.config.dragDiv,c={self:d},d=[],e=[a.config.r_down,a.config.l_down,a.config.r_up,a.config.l_up,a.config.r_middle,a.config.l_middle,a.config.t_middle,a.config.b_middle],j=document.createElement("div"),g=document.createElement("img");h=c.self;g.style.width="100%";
g.style.height="100%";k(g);g.setAttribute("id",a.config.OO_IMG);g.setAttribute("src",h.src);j.setAttribute("id",a.config.dragDiv);j.style.top=v(h).STop+"px";j.style.left=v(h).SLeft+"px";j.style.width=h.width+"px";j.style.height=h.height+"px";j.style.border=a.config.border;k(j);j.appendChild(g);for(c=0;c<8;c++)d[c]=document.createElement("div"),d[c].setAttribute("id",e[c]),l(d[c].style,F[c]),l(d[c].style,G);for(c=0;c<d.length;c++)j.appendChild(d[c]);h.parentNode.appendChild(j);a.list=e;a._obj=i(b);
a._obj.style.position=H;f.addEvent(document,"click",x);a.config.frame!=null&&f.addEvent(a.config.frame.contentWindow.document,"click",x);for(b=0;b<a.list.length;b++)z(a.list[b],b)}}function x(b){for(var d=i(a.config.dragDiv),c=i(h),e=!1,g=0;g<a.list.length;g++)b.target==i(a.list[g])&&(e=!0);if(!(b.target==c||b.target==d||e||b.target==i(a.config.OO_IMG))&&c)c.removeAttribute(u),d.parentNode.removeChild(d),h=void 0}var a=this,h;if(!(a instanceof p))return new p(e,o.merge(I,g));a.config=g;var i=function(b){return a.config.frame==
null?typeof b=="string"?document.getElementById(b):b:typeof b=="string"?a.config.frame.contentWindow.document.getElementById(b):b};try{f.addEvent(i(e),"click",E),i(e).isClick=!0}catch(J){o.log("\u6e29\u99a8\u63d0\u793a\uff1a\u60a8\u518d\u4f7f\u7528\u56fe\u7247\u5927\u5c0f\u4efb\u610f\u7f29\u653e\u529f\u80fd\u65f6\u63d0\u4f9b\u4e86\u4e0d\u5b58\u5728\u7684Id\u6216\u8005\u5bf9\u8c61("+e+")")}}var I={dragDiv:"dragDiv",frame:null,OO_IMG:"oo_img",border:"1px solid #000000",filter:[50,0.8],r_down:"r_down",
l_down:"l_down",r_up:"r_up",l_up:"l_up",r_middle:"r_middle",l_middle:"l_middle",t_middle:"t_middle",b_middle:"b_middle"},F=[{right:"-4px",bottom:"-4px",cursor:"nw-resize"},{left:"-4px",bottom:"-4px",cursor:"ne-resize",position:"absolute"},{right:"-4px",top:"-4px",cursor:"ne-resize",position:"absolute"},{left:"-4px",top:"-4px",cursor:"nw-resize",position:"absolute"},{right:"-4px",top:"50%",marginTop:"-4px",cursor:"e-resize"},{left:"-4px",top:"50%",marginTop:"-4px",cursor:"e-resize"},{top:"-4px",left:"50%",
marginLeft:"-4px",cursor:"n-resize"},{bottom:"-4px",left:"50%",marginLeft:"-4px",cursor:"n-resize"}],G={position:"absolute",border:"1px solid #000000",width:"7px",background:"#fff",height:"7px",fontSize:"0",zIndex:"5"},u="move_zoom",H="absolute",y=document.all?!0:!1,f={addEvent:function(e,g,f){e.addEventListener?e.addEventListener(g,f,!1):e.attachEvent?e.attachEvent("on"+g,f):e["on"+g]=f},removeEvent:function(e,g,f){e.removeEventListener?e.removeEventListener(g,f,!1):e.detachEvent?e.detachEvent("on"+
g,f):e["on"+g]=null},Bind:function(e,f){var k=Array.prototype.slice.call(arguments).slice(2);return function(l){return f.apply(e,[l||window.event].concat(k))}}};return p});
