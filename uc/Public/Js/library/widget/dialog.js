BQ.add("widget.Dialog",function(g){function m(a,b){function p(n){a.callBack&&!n&&g.isFunction(a.callBack)&&a.callBack(b);$(a.setIframe.document.body)[0].removeChild(b[0]);if(f.find("div[id^="+j+"]").size()==0)try{$(a.setIframe.document.body)[0].removeChild(k[0]),$(a.setIframe.document.body)[0].removeChild(k[1])}catch(c){}}function o(n){var c=$(a.setIframe).width(),d=$(a.setIframe).height(),e=$(a.setIframe.document.documentElement||a.setIframe.document.body).scrollTop();$(a.setIframe).scrollLeft();
var h=a.posLeft?parseFloat(a.posLeft):(c-b.outerWidth())/2,g=a.posTop?parseFloat(a.posTop):(d-b.outerHeight())/2;g+=e;k.css({position:l,left:a.iframeWidth?h:0,top:a.iframeHeight?l=="fixed"?g:g+(a.scroll?e:0):0,width:a.iframeWidth?a.iframeWidth:Math.max(c,f.width()),height:a.iframeHeight?a.iframeHeight:~~Math.max(d,f.height())+e});n&&n=="Y"?(r||!(b.css("position")&&b.css("position").toLowerCase()=="fixed"))&&b.css("top",q+e):(b.css({margin:"0",position:l,left:h,top:g-(l=="fixed"?e:0),display:"block"}),
a.backStyle&&k.css({backgroundColor:"#cccccc",opacity:a.opacity?a.opacity:0.25}),q=a.posTop?(d-b.height())/2:a.posTop,a.posLeft&&b.width())}function x(){i.mouseover(function(){$(this).css("cursor","move")});i.mousedown(function(c){$("div[id^="+j+"]").css("zIndex",9802);b.css("zIndex",9803);a.isMove=!0;var d=c.clientY||c.pageY;s=(c.clientX||c.pageX)-(b.parent()==f?b.position().left:b.offset().left);t=d-(b.parent()==f?b.position().top:b.offset().top);$(a.setIframe.document).bind({mousemove:u,mouseup:v})})}
function u(c){if(a.isMove){document.all?i[0].setCapture():a.setIframe.captureEvents(i[0].MOUSEMOVE||i[0].MOUSEUP);var d=c.clientX||c.pageX,c=c.clientY||c.pageY;$("div[id^="+j+"]").css("zIndex",9801);b.css("zIndex",9802);b.css({left:d-s,top:c-t-(l=="fixed"?$(a.setIframe.document.documentElement||a.setIframe.document.body).scrollTop():0)});q=~~b[0].style.top.slice(0,-2)-$(a.setIframe).scrollTop();b[0].style.width.slice(0,-2);$(a.setIframe).scrollLeft()}}function v(b){document.all?i[0].releaseCapture():
a.setIframe.releaseEvents(b.MOUSEMOVE||b.MOUSEUP);$(a.setIframe.document).unbind("mousemove",u);$(a.setIframe.document).unbind("mouseup",v)}var k,h=arguments.callee;h.id=h.id||0;var h=++h.id,j=a.attrDiglog?a.attrDiglog:"BQ_Dialog_Layer",c=a.attrDiglog?a.attrDiglog:j+h;this.groundName=c;if(!(this instanceof m))return new m(g.merge(y,a),b);if(!a.container)switch(a.backBoardType){case "autoHide":a.container="<div id='"+c+"' class='mode_dialog_box mode_dialog_autohide'><div class='mode_dialog_wrap'><div class='mode_dialog_content'></div></div></div>";
break;case "info":a.container="<div id='"+c+"' class='mode_dialog_box' style='display:none'><div class='mode_dialog_wrap'><div class='mode_dialog_title'><h6><span></span></h6><span class='mode_dialog_close'>X</span></div><div class='mode_dialog_content'></div><div class='mode_dialog_op'><button class='mode_dialog_button commit' type='button'>\u786e\u8ba4</button><button class='mode_dialog_button cancel' type='button'>\u53d6\u6d88</button></div></div></div>";break;case "confirm":a.container="<div id='"+
c+"' class='mode_dialog_box' style='display:none'><div class='mode_dialog_wrap'><div class='mode_dialog_title'><h6><span></span></h6><span class='mode_dialog_close'>X</span></div><div class='mode_dialog_content'></div><div class='mode_dialog_op'  style='text-align:center'><button class='mode_dialog_button commit' type='button'>\u786e\u8ba4</button><button class='mode_dialog_button cancel' type='button'>\u53d6\u6d88</button></div></div></div>";break;default:a.container="<div id='"+c+"' class='mode_dialog_box'><div class='mode_dialog_wrap'><div class='mode_dialog_title'><h6><span></span></h6><span class='mode_dialog_close'>X</span></div><div class='mode_dialog_content'></div><div class='mode_dialog_op' style='text-align:center'><button class='mode_dialog_button commit' type='button'>\u786e\u8ba4</button></div></div></div>"}a.backBoardType==
"autoHide"&&setTimeout(p,a.timer);var q=0,r=$.browser.msie&&$.browser.version=="6.0",h=a.viewIframe||$.browser.msie?"wd_shade_iframe,#wd_shade":"wd_shade",f=$(a.setIframe.document.body),l=a.posType?a.posType:r?"absolute":"fixed",s=0,t=0;f.find("#"+h).size()==0&&a.backgroundBoard&&((a.viewIframe||$.browser.msie)&&f.append("<iframe id='wd_shade_iframe' class='mode_dialog_shade-iframe' style='z-index:9800'></iframe>"),f.append("<div id='wd_shade' class='mode_dialog_shade' style='z-index:9801'></div>"));
if(b)if(a.appendType=="append")if(a.setIframe==window)$(b).attr("id",c);else{var e=$(b).clone(!0).css("display","block").attr("id",c);f.append(document.all?e[0].outerHTML:e);document.body.removeChild(d[0])}else document.all?(d=$(b)[0].outerHTML||"",d=$(d).appendTo($(window.document.body)).attr("id",c),f.append(d[0].outerHTML),document.body.removeChild(d[0])):f.append($(b).clone(!0).attr("id",c));else{var d=$(a.container).appendTo($(window.document.body)).attr("id",c);f.append(document.all?d[0].outerHTML:
d);document.all&&document.body.removeChild(d[0])}b=f.find("#"+c);d=b.find(".mode_dialog_op");switch(a.hasButton){case "no":d.remove();break;case "left":case "right":case "center":if(d.css("textAlign",a.hasButton),a.buttonInfo){d.empty();c=a.buttonInfo;for(e=0;e<c.length;e++){var w="<input type='button'  class='"+c[e].className+"' value='"+c[e].text+"' id='"+(c[e].id?c[e].id:j+"_"+e)+"'>";g.isFunction(c[e].click)?$(w).appendTo(d).click(c[e].click):$(w).appendTo(d)}}}g.isString(a.setContent)||(a.setContent=
$(a.setContent).clone());this.objBack=f.find("#"+h);k=f.find("#"+h);b.css("zIndex",9802);b.find(".mode_dialog_title").find("span").eq(0).html(a.setTitle!=""?a.setTitle:"&nbsp;");b.find(".mode_dialog_content").html(a.setContent!=""?a.setContent:"&nbsp;");$(a.closeHandler,b).bind("click",function(a){a.preventDefault();p()});a.beforeCallBack&&g.isFunction(a.beforeCallBack)&&a.beforeCallBack(b);this.obj=b;var i=a.overArea&&f.find(a.overArea).size()>0?$(a.overArea,b):b;try{top.onresize=function(){a.scroll&&
o()},top.onscroll=function(){a.scroll&&o("Y")}}catch(z){}a.backBoardType=="info"&&a.draggable&&x();this.reSize=o;this.setClose=p;o();b.resize(function(){b.height()>$(a.setIframe).height()&&b.css({height:$(a.setIframe).height(),overflow:"auto"})})}var y={closeHandler:"",posLeft:null,posTop:null,setTitle:"",isMove:!1,draggable:!0,overArea:null,setContent:"",backBoardType:"alert",timer:3E3,callBack:null,container:null,backStyle:!1,backgroundBoard:!0,setIframe:window,scroll:!0,beforeCallBack:null,hasButton:"default",
buttonInfo:null,attrDiglog:null,viewIframe:!1,iframeWidth:null,iframeHeight:null,opacity:null,posType:null,appendType:"clone"};g.augment(m,{close:function(a,b){a&&g.isFunction(a)&&a();this.setClose(b)},setTitleValue:function(a,b){b?this.obj.find(b).attr("tagName")!="INPUT"&&this.obj.find(b).attr("tagName")!="TEXTAREA"?this.obj.find(b).html(a):this.obj.find(b).val(a):this.obj.find(".mode_dialog_title").find("span").eq(0).html(a);this.reSize()},setContentValue:function(a,b){b?this.obj.find(b).attr("tagName")!=
"INPUT"&&this.obj.find(b).attr("tagName")!="TEXTAREA"?this.obj.find(b).html(a):this.obj.find(b).val(a):this.obj.find(".mode_dialog_content").children(0).html(a);this.reSize()},getTitle:function(a){return a?this.obj.find(a).attr("tagName")!="INPUT"&&this.obj.find(a).attr("tagName")!="TEXTAREA"?this.obj.find(a).html():this.obj.find(a).val():this.obj.find(".mode_dialog_title").find("span").eq(0).text()},getContent:function(a){return a?this.obj.find(a).attr("tagName")!="INPUT"&&this.obj.find(a).attr("tagName")!=
"TEXTAREA"?this.obj.find(a).html():this.obj.find(a).val():this.obj.find(".mode_dialog_content").children(0).text()}});return m});
