BQ.add("widget.ThreeImage",function(C){function t(n,a){function u(){for(var a=j.length=0;a<c.length-1;a++)j[a]=c[c.length-2-a];j.push(g.eq(h));h--;h<0&&(h=d-1);i--;i<0&&(i=d-1);f=h;e=i;i++;i==d&&(i=0);h++;h==d&&(h=0)}function B(){for(var a=c.length=0;a<j.length-1;a++)c[a]=j[j.length-2-a];c.push(g.eq(e));e++;e==d&&(e=0);f++;f==d&&(f=0);i=e;h=f;f--;f<0&&(f=d-1);e--;e<0&&(e=d-1)}function v(){a.index++;if(a.index==d)a.index=0;c[0].css({zIndex:b[a.visible].zIndex});c[0].animate({width:b[a.visible].width,
height:b[a.visible].height,left:b[a.visible].left,top:b[a.visible].top},{duration:a.speed,queue:!1});for(var k=0;k<a.visible;k++)if(k>0){var f=k-1;c[k].animate({width:b[f].width,height:b[f].height,left:b[f].left,top:b[f].top},{duration:a.speed,queue:!1})}var e=a.visible-1;c[a.visible].animate({width:b[e].width,height:b[e].height,left:b[e].left,top:b[e].top},{duration:a.speed,complete:function(){c[a.visible].css({zIndex:b[e].zIndex});c.shift();c.push(g.eq(i));i++;i==d&&(i=0);h++;h==d&&(h=0);a.callback&&
a.callback.call(w,a.index)},queue:!1});x=!0}function y(){a.index--;if(a.index<0)a.index=d-1;j[0].css({zIndex:b[a.visible].zIndex});for(var k=0;k<a.visible;k++){var c=a.visible-k;j[k].animate({width:b[c].width,height:b[c].height,left:b[c].left,top:b[c].top},{duration:a.speed,queue:!1})}j[a.visible].animate({width:b[0].width,height:b[0].height,left:b[0].left,top:b[0].top},{duration:a.speed,complete:function(){j[a.visible].css({zIndex:b[0].zIndex});j.shift();j.push(g.eq(f));f--;f<0&&(f=d-1);e--;e<0&&
(e=d-1);a.callback&&a.callback.call(w,a.index)},queue:!1});z=!0}var w=this;if(!(w instanceof t))return new t(n,C.merge(D,a));var n=$(n),g=n.find(a.panels),d=g.length;g.eq(d-1);var c=[],j=[],b=[],i=a.visible+1,f=d-2,h=d-1,e=a.visible,x=!0,z=!0,o=null,l=null,p=null,q=null,r=n.find(a.btnprev),s=n.find(a.btnnext);r.css({cursor:"pointer"});s.css({cursor:"pointer"});g.each(function(b){$(this).attr("order",b);b<=a.visible&&c.push(g.eq(b))});if(d==a.visible+1)i=0,h=d-1,f=a.visible,e=0;for(var A=0;A<=a.visible;A++){var m=
g.eq(A),m={width:m.width(),height:m.height(),left:m.css("left"),top:m.css("top"),zIndex:m.css("z-index")};b.push(m)}u();a.type==0?(o=v,r.click(function(b){b.preventDefault();clearTimeout(p);p=setTimeout(function(){g.stop(!1,!0);x==!0&&(x=!1,u());y();setTimeout(B,a.speed+100)},100)}),s.click(function(){clearTimeout(p);p=setTimeout(function(){g.stop(!1,!0);v()},100)})):a.type==1&&(o=y,r.click(function(){clearTimeout(q);q=setTimeout(function(){g.stop(!1,!0);y()},100)}),s.click(function(b){b.preventDefault();
clearTimeout(q);q=setTimeout(function(){g.stop(!1,!0);z==!0&&(z=!1,B());v();setTimeout(u,a.speed+100)},100)}));l=setInterval(o,a.interval);r.hover(function(){clearInterval(l)},function(){l=setInterval(o,a.interval)});s.hover(function(){clearInterval(l)},function(){l=setInterval(o,a.interval)});g.hover(function(){clearInterval(l)},function(){l=setInterval(o,a.interval)})}var D={panels:"li",btnprev:".btnprev",btnnext:".btnnext",visible:3,index:2,type:0,interval:3E3,speed:500,callback:null};return t});
